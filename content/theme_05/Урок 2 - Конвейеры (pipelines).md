+++
title = "Урок 2. Конвейеры (pipelines)"
weight = 502
+++
# Урок 2: Конвейеры (`|`): Соединяем команды в цепочки

В предыдущем уроке мы мельком увидели пример использования символа `|`. Этот символ — одна из фундаментальных и самых мощных концепций в философии Unix/Linux. Он называется **конвейер** (pipeline).

### Что такое конвейер?

Конвейер позволяет взять **стандартный вывод** (stdout) одной программы и сделать его **стандартным вводом** (stdin) для другой программы.

Представьте себе заводской конвейер:
1.  Первый станок (программа 1) что-то производит и кладет на ленту (стандартный вывод).
2.  Лента движется ко второму станку.
3.  Второй станок (программа 2) берет с ленты продукт (стандартный ввод), обрабатывает его и кладет на следующую ленту.
...и так далее.

В Linux каждая простая команда — это как отдельный станок. Она хорошо делает что-то одно. `ls` — хорошо показывает списки файлов. `grep` — хорошо фильтрует текст. `wc -l` — хорошо считает количество строк. Конвейер позволяет соединять их вместе для решения более сложных задач.

### Практические примеры

Давайте посмотрим, как это работает.

**Пример 1: Сколько файлов в папке?**

Команда `ls` выводит список файлов. Команда `wc -l` (Word Count, флаг `-l` — lines) подсчитытывает количество строк на своем входе. Соединим их!

```bash
ls | wc -l
```
`ls` выведет список файлов (каждый на новой строке), но вместо экрана этот список "уйдет по трубе" в `wc -l`, которая посчитает количество строк и выдаст нам итоговое число.

**Пример 2: Найти все файлы с "config" в имени и посчитать их.**

```bash
ls | grep "config" | wc -l
```
Здесь уже три "станка":
1.  `ls` выдает список всех файлов.
2.  `grep "config"` получает этот список, фильтрует его, оставляя только строки со словом "config".
3.  `wc -l` получает отфильтрованный список и считает, сколько в нем осталось строк.

**Пример 3: Показать 5 самых больших файлов в текущей папке.**

Это более сложная, но очень показательная команда:
```bash
ls -lh | sort -rh -k 5 | head -n 5
```
Разберем по частям:
1.  `ls -lh`: Показывает файлы в "длинном" (`-l`) и "человекочитаемом" (`-h`, например, `10K`, `2M`) формате.
2.  `sort -rh -k 5`: Сортирует полученный текст.
    *   `-r`: в обратном порядке (reverse).
    *   `-h`: с учетом "человекочитаемых" размеров (human-numeric-sort).
    *   `-k 5`: по пятой колонке (где как раз и находится размер файла).
3.  `head -n 5`: Берет отсортированный список и показывает только первые 5 строк.

### Сила в комбинации

Вам не нужно искать одну сложную команду, которая решит вашу задачу. Вместо этого вы думаете: "Как я могу разбить задачу на простые шаги?".
1.  Мне нужно получить список чего-то (`ls`, `ps`, `cat`).
2.  Мне нужно отфильтровать этот список (`grep`).
3.  Мне нужно что-то сделать с отфильтрованным списком (посчитать `wc`, отсортировать `sort`, обрезать `head`/`tail`).

И соединяете эти шаги с помощью `|`. В этом и заключается философия Unix: "Каждая программа должна делать что-то одно, но делать это хорошо".

---
Конвейеры — это то, что превращает набор простых утилит в мощнейшую среду для обработки данных. Понимание этого принципа открывает перед вами безграничные возможности для автоматизации и анализа.

**В сл��дующем уроке мы познакомимся с еще одной важной командой для поиска — `find`, которая ищет не текст внутри файлов, а сами файлы по их свойствам.**

{{< button "/theme_05/Урок 3 - Поиск файлов (find)/" "Следующий урок" >}}{{< button "/theme_05/Урок 1 - Поиск текста в файлах (grep)/" "Предыдущий урок" >}}